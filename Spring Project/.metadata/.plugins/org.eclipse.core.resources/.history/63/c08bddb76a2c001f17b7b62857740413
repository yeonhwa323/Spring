<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.doit.senti.mapper.InquiryMapper">

	<!-- // 문의내역 갯수 반환하는 메서드 public int getCount(String field, String query) 
		throws ClassNotFoundException, SQLException; -->
	<!-- <select id="getCount" resultType="Integer"> SELECT COUNT(*) CNT FROM 
		inquiry WHERE member_id = #{member_id} </select> -->

	<!-- // 문의내역 삭제하는 메서드 public int delete(String inquiryId) throws ClassNotFoundException, 
		SQLException; -->
	<delete id="delete">
		DELETE inquiry
		WHERE inquiry_id= #{inquiryId}
	</delete>

	<!-- // 문의내역 추가하는 메서드 -->
  	<!-- buyInquiry 라디오버튼 선택시 -->
	<insert id="insertBuyInquiry">
		INSERT INTO inquiry
		(inquiry_id, inquiry_title, inquiry_content, inquiry_date <if test="filesrc">, filesrc</if> , member_id , buy_inquiry )
		VALUES(
			(SELECT NVL(MAX(TO_NUMBER(inquiry_id)),0)+1 FROM product), #{inquiryTitle, jdbcType=VARCHAR}, #{inquiryContent, jdbcType=VARCHAR} , SYSDATE
			<if test="filesrc">, #{fileSrc, javaType=String, jdbcType=VARCHAR} </if> , #{memberId, jdbcType=VARCHAR}
			, #{buyInquiry} 
			)
	</insert>
	<!-- generalInquiry 라디오버튼 선택시 -->
	<insert id="insertGeneralInquiry">
		INSERT INTO inquiry
		(inquiry_id, inquiry_title, inquiry_content, inquiry_date <if test="filesrc">, filesrc</if>, member_id , general_inquiry )
		VALUES(
			(SELECT NVL(MAX(TO_NUMBER(inquiry_id)),0)+1 FROM product), #{inquiryTitle, jdbcType=VARCHAR}, #{inquiryContent, jdbcType=VARCHAR} , SYSDATE
			<if test="filesrc">, #{fileSrc, javaType=String, jdbcType=VARCHAR} </if>, #{memberId, jdbcType=VARCHAR}
			, #{generalInquiry} 
			)
	</insert>
	<!-- etcInquiry 라디오버튼 선택시 -->
	<insert id="insertEtcInquiry">
		INSERT INTO inquiry
		(inquiry_id, inquiry_title, inquiry_content, inquiry_date <if test="filesrc">, filesrc</if>, member_id , etcInquiry )
		VALUES(
			(SELECT NVL(MAX(TO_NUMBER(inquiry_id)),0)+1 FROM product), #{inquiryTitle, jdbcType=VARCHAR}, #{inquiryContent, jdbcType=VARCHAR} , SYSDATE
			<if test="filesrc">, #{fileSrc, javaType=String, jdbcType=VARCHAR} </if>, #{memberId, jdbcType=VARCHAR}
			, #{etcInquiry} 
			)
	</insert>
	

	<!-- // 문의내역의 목록을 List 컬렉션으로 반환하는 메서드 public List<InquiryVO> getInquirys( 
		 String memberId // 작성한멤버아이디) throws ClassNotFoundException, SQLException; -->
	<select id="getInquirys" resultType="org.doit.senti.domain.board.InquiryVO">
		select * from inquiry 
		where member_id = #{memberId}
	</select>
	
		
	<!-- // 문의내역 상세보기
	InquiryVO getInquiryId(int inquiryId) throws ClassNotFoundException, SQLException; -->
	<select id="getInquiryId" resultType="org.doit.senti.domain.board.InquiryVO">
		select * from inquiry
		where inquiry_id = #{inquiryId}
	</select>

</mapper>
 